@inject IHttpContextAccessor context;
@model Email;

@using System.Text.Json;

@{
  ViewData["Title"] = "Contáctanos";
  string? jsonStringUsuario = context.HttpContext.Session.GetString("Usuario");
  Usuario? userLogeado = new Usuario();
  bool logeado = false;

  if (jsonStringUsuario != null)
  {
    userLogeado = JsonSerializer.Deserialize<Usuario>(jsonStringUsuario);
    logeado = true;
  }
  else
  {
    logeado = false;
  }
}

<!-- bradcam_area_start -->
<div class="bradcam_area breadcam_bg_2">
    <h3>Ponte en contacto</h3>
</div>
<!-- bradcam_area_end -->
<!-- ================ contact section start ================= -->
<section class="contact-section mt-5">
    <div class="container">
        <div class="d-flex justify-content-center mb-5">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3168.9221862852282!2d-6.162825948673585!3d37.4153140797274!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd12169888302721%3A0x7be50276b0a7e156!2sAv.%20Virgen%20del%20Roc%C3%ADo%2C%203%2C%2041804%20Olivares%2C%20Sevilla!5e0!3m2!1ses!2ses!4v1677758764465!5m2!1ses!2ses" width="1000" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>


        <div class="row">
            <div class="col-12">
                <h2 class="contact-title">Habla con nosotros</h2>
            </div>
            <div class="col-lg-8">
                <form class="form-contact contact_form" id="contactForm" novalidate="novalidate" method="post">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                              <textarea class="form-control w-100" name="message" id="message" cols="30" rows="9" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce el mensaje'" placeholder=" Introduce el mensaje" asp-for="Message"></textarea>
                            </div>
                        </div>
                        @if(logeado){
                          <div class="col-sm-6">
                            <div class="form-group">
                                <input disabled class="form-control valid" name="name" id="name" type="text" value="@userLogeado.Nombre @userLogeado.Apellidos" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu nombre'" placeholder="Introduce tu nombre" asp-for="Name">
                                <input class="form-control valid" name="name" id="name" type="hidden" value="@userLogeado.Nombre @userLogeado.Apellidos" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu nombre'" placeholder="Introduce tu nombre" asp-for="Name">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <input disabled class="form-control valid" name="from" id="from" type="email" value="@userLogeado.Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu email'" placeholder="Introduce tu email" asp-for="From">
                                <input class="form-control valid" name="from" id="from" type="hidden" value="@userLogeado.Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu email'" placeholder="Introduce tu email" asp-for="From">

                            </div>
                        </div>
                        } else {
                          <div class="col-sm-6">
                            <div class="form-group">
                                <input class="form-control valid" name="name" id="name" type="text" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu nombre'" placeholder="Introduce tu nombre" asp-for="Name">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                              <input class="form-control valid" name="from" id="from" type="email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce tu email'" placeholder="Introduce tu email" asp-for="From">
                            </div>
                        </div>
                        }
                        

                        <div class="col-12">
                            <div class="form-group">
                                <input class="form-control" name="subject" id="subject" type="text" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Introduce el asunto'" placeholder="Introduce el asunto" asp-for="Subject">
                            </div>
                        </div>
                    </div>
                    <div class="form-group mt-3">
                        <button type="submit" class="button button-contactForm boxed-btn">Enviar</button>
                    </div>
                </form>
            </div>
            <div class="col-lg-3 offset-lg-1">
                <div class="media contact-info">
                    <span class="contact-info__icon"><i class="ti-home"></i></span>
                    <div class="media-body">
                        <h3>Avenida Virgen del Rocío, 6</h3>
                        <p>41804 Olivares</p>
                    </div>
                </div>
                <div class="media contact-info">
                    <span class="contact-info__icon"><i class="ti-tablet"></i></span>
                    <div class="media-body">
                        <h3>+34 689 325 436</h3>
                        <p>Lunes a Viernes 9:00 a 18:00</p>
                    </div>
                </div>
                <div class="media contact-info">
                    <span class="contact-info__icon"><i class="ti-email"></i></span>
                    <div class="media-body">
                        <h3>info@sullivanburger.com</h3>
                        <p>Envíanos tu consulta en cualquier momento</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ contact section end ================= -->
